I am preparing my lectures on group cohomology. This is the third time that I have thought seriously about the subject, and, just like schemes, the more I think about it using Lean and the more I re-investigate the idea, the better I understand it. I think that Patrick had a similar experience with his understanding of topology and its relationship to the theory of filters, Patrick's explanation of the theory of topological spaces, uniform spaces and filters ended up being better than Bourbaki's (for example Bourbaki got the definition wrong -- this was proved by people like I. James and formalised by people like @**Johannes Hölzl**  . Patrick understood that topological spaces are just a special case of filters, they're neighbourhood filters, that's why filters are a really cool way to do topology. 

So similarly, I am thinking today about the theory of G-modules, where G is a group and M is an abelian group, because this is the important case which has got a lot of mileage in mathematics where we're interested in the Langlands philosophy and don't give a monkeys about stupid things like groups with zero and distribs. 

So I was very privileged to work with two Imperial students @**Anca Ciobanu** and @**Shenyang Wu** . Anca formalised the theory of group cohomology in low degree in her project [here](https://github.com/anca797/group-cohomology) and Shenyang has definitions of $$n$$-cycles and $$n$$-coboundaries and a theory of general group cohomology [here](https://github.com/Shenyang1995/M4R). Thanks to Patrick Massot, you can just use `leanproject get` to pull these working repositories onto your computer, and while they won't be compatible with modern mathlib you can just clone them and play with them as one-off repos or refactor them or abstract out some API and PR a version which compiles with mathlib master (there are no guarantees that any of my students projects compile with master, they are stand-alone pieces but can certainly be regarded as a guide to an API for the area they cover.

Let me start with Anca's work. It's an extremely good blueprint for an API in the theory of group cohomology of low degree. Here is a mathematical theorem: If $$0\to A\to B\to C\to 0$$ is a short exact sequence of $$G$$-modules then we get a long exact sequence $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)$$. As far as I know, Anca was the first person to prove that theorem in Lean. Here $$H^0$$ and $$H^1$$ are defined explicitly: $$H^0$$ is the $$G$$-invariants of $$A$$ and $$H^1$$ is 1-cocycles over 1-coboundaries, a fundamental abelian group defined to be an obstruction to quite a general lifting problem (this is lifting in the sense of mathematics, not this `quotient.lift` thing -- can we change the name in Lean 4?). It's not in mathlib because it's not in mathlib style, but who cares, the theorem is a result which had huge influence on the development of mathematics and Anca formalised it. By the time the algebra ancients had explicitly figured out like the extension of Anca's long exact sequence using 2-cocycles, and the inflation-restriction theorem $$0\to H^1(G/N,M^N)\to H^1(G,M)\to H^1(N,M)$$, that these techniques began to revolutionise arithmetic -- these theorems were really useful rewrite rules especially when you could prove that some cohomology group was zero because then you would then get for free that some map was injective and some other map was surjective -- these tricks turn out to be fundamental and powerful. They were giving people new ways to think about fundamental questions such as what the largest abelian extension of a general number field was (the abelianised etale fundamental group). These people wanted to generalise the classical result of Kronecker and Weber which said that the abelianised fundamental group of the rationals was canonically isomorphic to $$\widehat{\Z}$$ in two different ways, one called the Artin way and the other one called the Deligne way (and of course non-canonically isomorphic to itself in a lot of ways, what with the uncountable profinite unit group). The reason Kronecker and Weber succeeded  was that a lot obstructions vanished -- abelianised fundamental group of the integers (the so-called "class group of the rationals") is trivial and the units of the integers (the so-called "unit group of the rationals") has order 2, two useful coincidences. As far as I know the main conjecture of Iwasawa theory (the $$GL_1$$ case) is still not proved for general totally real number fields at the prime 2 -- am I up to date here? That 2 does cause problems. Independently of this, people were interested in explicit computations, for example class groups of imaginary quadratic fields were seriously tabulated because people had a real interest in these things -- could it really be true that $$41$$ was the largest positive integer $$n$$ such that Euler's polynomial $$x^2+x+n$$ was prime for $$0\leq x\leq n-

So eventually this concept of $$H^1$$ being an obstruction to the proof of a theorem which says that a functor $$H^0$$ sends epimorphisms to epimorphisms, and the idea of trying to measure it was extremely fruitful, it explained things like non-uniqueness of factorization in a conceptual way -- some cool lifting (in the mathematical sense, not the `quotient.lift` sense) existed iff an obstruction vanished. These ideas led to  . Of course there is power in the development of class field theory as a more conceptual understanding of the original analytic techniques proving there were infinitely many primes in an AP is a theorem in the theory which I believe that one should call "explicit group cohomology in degree at most 1". In reformalising Anca's work I have come to understand it better. Here is the theory of "explicit group cohomology in low degrees".

The theory begins with "explicit $$H^0(G,M)$$", the theory in degree zero. This consists of one functor, called `h0`. Mathematicians tend to think of it as having type "Let $$G$$ be a group with group law `*` and let $$A$$ be an abelian group with group law `+` and furthermore say $$A$$ is a $$G$$-module with module law `•` and we can now develop a theory called $$H^0(G,A)$$ which is the theory of $$G$$-invariant subsets of $$A$$, considered as abelian groups. And the main theorem of the theory of explicit $$H^0$$ is the following fundamental fact: if $$0\to A\to B\to C\to 0$$ is a short exact sequence of abelian groups then then $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)$$ is a long exact sequence of cohomology groups. The observation that $$H^0$$ was not right exact and what exactly happened next was an interesting open problem, solved by the theory of explicit 1-cocycles. But before we get onto 1-cycles I'm just idly building the theory of $$0$$-cocycles and trying to figure out what kind of object we have here, and on some abstract level it's just the theory of `mul_action`

Explicit cohomology in degree 0 is the theory 
Explicit Group cohomology in degree 1 is the theory of two functions called $$H^0(G,M)$$ and $$H^1(G,M)$$ defined respectively as 0-cocycles (we don't bother with 0-coboundaries because they're all zero, the theory of 0-coboundaries does not exist for us)), and as 1-cocycles over 1-coboundaries. and both explicitly defined as cocycles over coboundaries, and the two main theorems in this theory are the long exact sequence I mentioned above, proved by Anca, and a new theorem called "inf-res" which says that if $$N$$ is a normal subgroup of $$G$$ and $$M$$ is an $$N$$-module then $$0\to H^1(G/N,H^0(M,N))\to H^1(G,M)\to H^1(N,M)$$. The proof is by an explicit calculation of cocycles and coboundaries and the experimental discovery of these two long exact sequences let algebraists to the theory of 2-cycles. And then we get a theory called the theory of explicit group cohomology in degree at most 2, which is Anca's work but we add in a new abelian group $$H^2(G,M)$$ defined as 2-cocycles over 2-coboundaries. And these two exact sequences -- "the long exact sequence" and "inf-res" both continue! And they continue in completely wacky ways! The long exact sequence just goes $$H^1(C)\to H^2(A)\to H^2(B)\to H^2(C)$$ and the inf-res one goes $$H^1(G,M)\to H^1(N,M)^{G/N}\to H^2(G/N,M^N)\to{\mathrm{ker}}(H^2(G,M)\to H^2(N,M))\to H^1(G/N,H^1(N,M))$$ and this kind of looks bewildering. Now one has to start asking some big questions about whether it is worth developing an explicit theory of 3-coycles, and this is because these two exact sequences turned out to be extremely powerful tools to use in the initial break through -- Langlands' proof of the local and global Langlands conjectures for abelian algebraic groups. The precise statement of the theorem was essentially worked out in Kenny Lau's thesis, and as anyone who has worked through the paper will know, including my former student And then after that there is a new theory called "Group cohomology in degree at most 2"

 I can tell you the main theorems of the theory of group cohomology of low degree. Anca defined $$H^0$$ and $$H^1$$ 
and had she been a Masters student rather than a Batchelor's student she could have done $$H^2$$, something which I think has never been done in Lean: look in any book on group cohomology to find out what a 2-cocycle and a 2-boundary is. There are two fundamental "long exact sequences for group cohomology in degrees at most 2". . The first one goes like this: $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)\to H^2(G,A)\to H^2(G,B)\to H^2(G,C)$ and then it stops, and . The first fundamental obserHistorically the first proofs of class field theory were developed using these . Historically this was the way the theory was developed, with humans discovering thinks like $$0\to H^1(G/N,M^N)groups `H0 (G : Group) (M : Ab)` which are functions from the mathematical idea that  :  :  The general theory of group cohomThis is I think the theory which Hasse was attacking in Cassels-Froehlich with com

















******************


I am preparing my lectures on group cohomology. This is the third time that I have thought seriously about the subject, and, just like schemes, the more I think about it using Lean and the more I re-investigate the idea, the better I understand it. I think that Patrick had a similar experience with his understanding of topology and its relationship to the theory of filters. Topological spaces are just a special case of filters, they're neighbourhood filters, that's why filters are a really cool way to do topology. 

So similarly, I am thinking today about the theory of G-modules, where G is a group and M is an abelian group, because this is the important case which has got a lot of mileage in mathematics where we're interested in the Langlands philosophy and don't give a monkeys about stupid things like monoids and distribs. 

So I was very privileged to work with two Imperial students @**Anca Ciobanu** and @**Shenyang Wu** . Anca formalised the theory of group cohomology in low degree in her project [here](https://github.com/anca797/group-cohomology). Thanks to the magic of Patrick Massot's `leanproject`, you can have the theory of group cohomology in low degree on your computer right now and it is an extremely good blueprint for an API -- it is someone who has struggled to conquer one of the mountains in that area. Anca conquered the following theorem: If $$0\to A\to B\to C\to 0$$ is a short exact sequence of abelian groups then there's an associated long exact sequence of cohomology groups $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)$$. That is what she has proved. She has given an extremely precise statement and proof of a theorem. It's not in mathlib because it's not in mathlib style, but is a theorem in the theory which I believe one should call "explicit group cohomology in degree at most 1". Explicit Group cohomology in degree 1 is the theory of two functions called $$H^0(G,M)$$ and $$H^1(G,M)$$ both explicitly defined as cocycles over coboundaries, and the two main theorems in this theory are the long exact sequence I mentioned above, proved by Anca, and a new theorem called "inf-res" which says that if $$N$$ is a normal subgroup of $$G$$ and $$M$$ is an $$N$$-module then $$0\to H^1(G/N,H^0(M,N))\to H^1(G,M)\to H^1(N,M)$$. The proof is by an explicit calculation of cocycles and coboundaries and the experimental discovery of these two long exact sequences let algebraists to the theory of 2-cycles. And then we get a theory called the theory of explicit group cohomology in degree at most 2, which is Anca's work but we add in a new abelian group $$H^2(G,M)$$ defined as 2-cocycles over 2-coboundaries. And these two exact sequences -- "the long exact sequence" and "inf-res" both continue! And they continue in completely wacky ways! The long exact sequence just goes $$H^1(C)\to H^2(A)\to H^2(B)\to H^2(C)$$ and the inf-res one goes $$H^1(G,M)\to H^1(N,M)^{G/N}\to H^2(G/N,M^N)\to{\mathrm{ker}}(H^2(G,M)\to H^2(N,M))\to H^1(G/N,H^1(N,M))$$ and this kind of looks bewildering. Now one has to start asking some big questions about whether it is worth developing an explicit theory of 3-coycles, and this is because these two exact sequences turned out to be extremely powerful tools to use in the initial break through -- Langlands' proof of the local and global Langlands conjectures for abelian algebraic groups. The precise statement of the theorem was essentially worked out in Kenny Lau's thesis, and as anyone who has worked through the paper will know, including my former student And then after that there is a new theory called "Group cohomology in degree at most 2"

 I can tell you the main theorems of the theory of group cohomology of low degree. Anca defined $$H^0$$ and $$H^1$$ 
and had she been a Masters student rather than a Batchelor's student she could have done $$H^2$$, something which I think has never been done in Lean: look in any book on group cohomology to find out what a 2-cocycle and a 2-boundary is. There are two fundamental "long exact sequences for group cohomology in degrees at most 2". . The first one goes like this: $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)\to H^2(G,A)\to H^2(G,B)\to H^2(G,C)$ and then it stops, and . The first fundamental obserHistorically the first proofs of class field theory were developed using these . Historically this was the way the theory was developed, with humans discovering thinks like $$0\to H^1(G/N,M^N)groups `H0 (G : Group) (M : Ab)` which are functions from the mathematical idea that  :  :  The general theory of group cohomThis is I think the theory which Hasse was attacking in Cassels-Froehlich with com

******

I am preparing my lectures on group cohomology. This is the third time that I have thought seriously about the subject, and, just like schemes, the more I think about it using Lean and the more I re-investigate the idea, the better I understand it. I think that Patrick had a similar experience with his understanding of topology and its relationship to the theory of filters, Patrick's explanation of the theory of topological spaces, uniform spaces and filters ended up being better than Bourbaki's (for example Bourbaki got the definition wrong -- this was proved by people like I. James and formalised by people like @**Johannes Hölzl**  . Patrick understood that topological spaces are just a special case of filters, they're neighbourhood filters, that's why filters are a really cool way to do topology. 

So similarly, I am thinking today about the theory of G-modules, where G is a group and M is an abelian group, because this is the important case which has got a lot of mileage in mathematics where we're interested in the Langlands philosophy and don't give a monkeys about stupid things like groups with zero and distribs. 

So I was very privileged to work with two Imperial students @**Anca Ciobanu** and @**Shenyang Wu** . Anca formalised the theory of group cohomology in low degree in her project [here](https://github.com/anca797/group-cohomology) and Shenyang has definitions of $$n$$-cycles and $$n$$-coboundaries in group cohomology [here](https://github.com/Shenyang1995/M4R). Thanks to the magic of Patrick Massot's `leanproject`, you can have both the theory of group cohomology in low degree and the theory of general group cohomology on your computer right now. Let me start by talking about Anca's work.

Anca's work is an extremely good blueprint for an API in the theory of group cohomology of low degree. Here is a mathematical theorem: If $$0\to A\to B\to C\to 0$$ is a short exact sequence of $$G$$-modules then we get a long exact sequence $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)$$. As far as I know, Anca was the first person to prove that theorem in Lean. Here $$H^0$$ and $$H^1$$ are defined explicitly: $$H^0$$ is the $$G$$-invariants and $$H^1$$ is 1-cocycles over 1-coboundaries. It's not in mathlib because it's not in mathlib style, but who cares, the theorem is a result which had huge influence on the development of mathematics, this concept of $$H^1$$ being an obstruction and the idea of trying to measure it was extremely fruitful, it explained things like non-uniqueness of factorization in a conceptual way -- some cool lifting (in the mathematical sense, not the `quotient.lift` sense) existed iff an obstruction vanished. These ideas led to  . Of course there is power in the development of class field theory as a more conceptual understanding of the original analytic techniques proving there were infinitely many primes in an AP is a theorem in the theory which I believe that one should call "explicit group cohomology in degree at most 1". In reformalising Anca's work I have come to understand it better. Here is the theory of "explicit group cohomology in low degrees".

The theory begins with "explicit $$H^0(G,M)$$", the theory in degree zero. This consists of one functor, called `h0`. Mathematicians tend to think of it as having type "Let $$G$$ be a group with group law `*` and let $$A$$ be an abelian group with group law `+` and furthermore say $$A$$ is a $$G$$-module with module law `•` and we can now develop a theory called $$H^0(G,A)$$ which is the theory of $$G$$-invariant subsets of $$A$$, considered as abelian groups. And the main theorem of the theory of explicit $$H^0$$ is the following fundamental fact: if $$0\to A\to B\to C\to 0$$ is a short exact sequence of abelian groups then then $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)$$ is a long exact sequence of cohomology groups. The observation that $$H^0$$ was not right exact and what exactly happened next was an interesting open problem, solved by the theory of explicit 1-cocycles. But before we get onto 1-cycles I'm just idly building the theory of $$0$$-cocycles and trying to figure out what kind of object we have here, and on some abstract level it's just the theory of `mul_action`

Explicit cohomology in degree 0 is the theory 
Explicit Group cohomology in degree 1 is the theory of two functions called $$H^0(G,M)$$ and $$H^1(G,M)$$ defined respectively as 0-cocycles (we don't bother with 0-coboundaries because they're all zero, the theory of 0-coboundaries does not exist for us)), and as 1-cocycles over 1-coboundaries. and both explicitly defined as cocycles over coboundaries, and the two main theorems in this theory are the long exact sequence I mentioned above, proved by Anca, and a new theorem called "inf-res" which says that if $$N$$ is a normal subgroup of $$G$$ and $$M$$ is an $$N$$-module then $$0\to H^1(G/N,H^0(M,N))\to H^1(G,M)\to H^1(N,M)$$. The proof is by an explicit calculation of cocycles and coboundaries and the experimental discovery of these two long exact sequences let algebraists to the theory of 2-cycles. And then we get a theory called the theory of explicit group cohomology in degree at most 2, which is Anca's work but we add in a new abelian group $$H^2(G,M)$$ defined as 2-cocycles over 2-coboundaries. And these two exact sequences -- "the long exact sequence" and "inf-res" both continue! And they continue in completely wacky ways! The long exact sequence just goes $$H^1(C)\to H^2(A)\to H^2(B)\to H^2(C)$$ and the inf-res one goes $$H^1(G,M)\to H^1(N,M)^{G/N}\to H^2(G/N,M^N)\to{\mathrm{ker}}(H^2(G,M)\to H^2(N,M))\to H^1(G/N,H^1(N,M))$$ and this kind of looks bewildering. Now one has to start asking some big questions about whether it is worth developing an explicit theory of 3-coycles, and this is because these two exact sequences turned out to be extremely powerful tools to use in the initial break through -- Langlands' proof of the local and global Langlands conjectures for abelian algebraic groups. The precise statement of the theorem was essentially worked out in Kenny Lau's thesis, and as anyone who has worked through the paper will know, including my former student And then after that there is a new theory called "Group cohomology in degree at most 2"

 I can tell you the main theorems of the theory of group cohomology of low degree. Anca defined $$H^0$$ and $$H^1$$ 
and had she been a Masters student rather than a Batchelor's student she could have done $$H^2$$, something which I think has never been done in Lean: look in any book on group cohomology to find out what a 2-cocycle and a 2-boundary is. There are two fundamental "long exact sequences for group cohomology in degrees at most 2". . The first one goes like this: $$0\to H^0(G,A)\to H^0(G,B)\to H^0(G,C)\to H^1(G,A)\to H^1(G,B)\to H^1(G,C)\to H^2(G,A)\to H^2(G,B)\to H^2(G,C)$ and then it stops, and . The first fundamental obserHistorically the first proofs of class field theory were developed using these . Historically this was the way the theory was developed, with humans discovering thinks like $$0\to H^1(G/N,M^N)groups `H0 (G : Group) (M : Ab)` which are functions from the mathematical idea that  :  :  The general theory of group cohomThis is I think the theory which Hasse was attacking in Cassels-Froehlich with com


